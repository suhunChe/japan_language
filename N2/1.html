<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N2 ë‹¨ì–´ í€´ì¦ˆ 1 (ë¹„ì¦ˆë‹ˆìŠ¤/ì¶”ìƒì–´)</title>
    
    <style>
        /* --- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ --- */
        .back-link {
            display: inline-block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #0f172a; /* N2 1íƒ„ ë‹¤í¬ í…Œë§ˆ */
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            font-weight: bold;
            transition: 0.3s;
            text-align: center;
        }
        .back-link:hover { background-color: #1e3a8a; transform: translateY(-2px); }
        .top-bar { text-align: center; background-color: #f1f5f9; padding-top: 10px; }

        /* --- ê¸°ì¡´ ìˆ˜í›ˆë‹˜ CSS ì½”ë“œ --- */
        /* N2 1íƒ„ ì „ìš© ìŠ¤íƒ€ì¼ (Unique ID: jp-n2-1) */
        #jp-n2-1-wrapper {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #f1f5f9; /* ìŠ¬ë ˆì´íŠ¸ ê·¸ë ˆì´ (ì°¨ë¶„í•¨) */
            color: #1e293b;
            display: flex; flex-direction: column; align-items: center; justify-content: center; /* ì˜¤íƒ€ ìˆ˜ì •ë¨ */
            padding: 10px; border-radius: 10px; margin: 0 auto 30px auto; position: relative; /* ì¤‘ì•™ ì •ë ¬ìš© margin ì¶”ê°€ */
            --max-width: 650px;
            --primary-color: #1e3a8a; /* ë¯¸ë“œë‚˜ì‡ ë¸”ë£¨ */
            --dark-color: #0f172a;
            --accent-color: #fbbf24; /* ê³¨ë“œ í¬ì¸íŠ¸ */
            
            /* [ë³´í†µ] ì‚¬ì´ì¦ˆ */
            --q-size: 40px; --ex-size: 18px; --opt-size: 18px; --ruby-size: 16px; --card-pad: 25px; --btn-pad: 14px;
        }

        #jp-n2-1-wrapper.size-small { --q-size: 24px; --ex-size: 14px; --opt-size: 14px; --ruby-size: 12px; --card-pad: 15px; --btn-pad: 10px; }
        #jp-n2-1-wrapper.size-large { --q-size: 52px; --ex-size: 24px; --opt-size: 24px; --ruby-size: 20px; --card-pad: 32px; --btn-pad: 18px; }

        #jp-n2-1-wrapper .quiz-container {
            background-color: #ffffff; padding: 20px; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(30, 58, 138, 0.2); text-align: center;
            width: 100%; max-width: var(--max-width); position: relative; border: 2px solid var(--primary-color);
            box-sizing: border-box;
        }

        .control-panel { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 10px; background: #e2e8f0; padding: 8px 12px; border-radius: 10px; }
        .set-group { display: flex; flex-wrap: wrap; gap: 4px; }
        .set-btn { background: #fff; border: 1px solid var(--primary-color); color: var(--primary-color); padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; cursor: pointer; }
        .set-btn.active { background: var(--primary-color); color: white; }
        .set-btn-all { border-color: #b45309; color: #b45309; }
        .set-btn-all.active { background: #b45309; color: white; }
        .size-group { display: flex; gap: 2px; }
        .size-btn { background: #cbd5e1; border: none; padding: 4px 8px; font-size: 11px; border-radius: 4px; cursor: pointer; }
        .size-btn.active { background: #1e3a8a; color: white; }

        .status-bar { display: flex; justify-content: space-between; align-items: center; background: #1e3a8a; color: white; padding: 8px 15px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; font-weight: bold; }
        .status-item { display: flex; align-items: center; gap: 5px; }
        .timer-icon { color: var(--accent-color); }
        .score-box { color: #93c5fd; }

        .question-card { padding: var(--card-pad); margin-bottom: 15px; border-bottom: 1px dashed #94a3b8; }
        .word-row { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 15px; }
        ruby { font-size: var(--q-size); font-weight: bold; color: var(--dark-color); line-height: 1.5; }
        rt { font-size: var(--ruby-size); color: #2563eb; font-weight: normal; }
        .audio-btn { background: #f1f5f9; border: 1px solid #cbd5e1; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.1s; }
        .audio-btn:active { transform: scale(0.9); }
        .audio-btn:hover { background: #e2e8f0; }

        .example-box { background: #f8fafc; padding: 15px; border-radius: 8px; font-size: var(--ex-size); color: #334155; line-height: 1.6; text-align: left; border: 1px solid #e2e8f0; }
        .highlight { color: #b45309; font-weight: bold; background: #fef3c7; padding: 0 4px; border-radius: 4px; }
        .hint-box { display: none; margin-top: 10px; font-size: calc(var(--ex-size) - 2px); color: #1d4ed8; font-weight: bold; animation: fadeIn 0.3s; border-top: 1px solid #e2e8f0; padding-top: 8px; }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .opt-btn { background-color: #f8fafc; border: 1px solid #cbd5e1; color: #1e293b; padding: var(--btn-pad); font-size: var(--opt-size); border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.1s; }
        .opt-btn:hover { background-color: #e2e8f0; border-color: var(--primary-color); }
        .opt-btn.correct { background-color: #1e3a8a !important; color: white !important; border-color: #1e3a8a; }
        .opt-btn.wrong { background-color: #b91c1c !important; color: white !important; border-color: #b91c1c; opacity: 0.7; }
        .opt-btn:disabled { cursor: not-allowed; opacity: 0.7; }

        .next-btn { display: none; width: 100%; margin-top: 20px; padding: 15px; background-color: var(--primary-color); color: white; font-size: 18px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; animation: fadeIn 0.3s; }
        .next-btn:hover { background-color: #172554; }

        #resultScreen_n2_1 { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.99); border-radius: 15px; flex-direction: column; align-items: center; justify-content: center; z-index: 50; padding: 20px; box-sizing: border-box; }
        .review-list { width: 100%; max-height: 200px; overflow-y: auto; background: #f1f5f9; border-radius: 8px; padding: 10px; margin: 15px 0; text-align: left; }
        .review-item { border-bottom: 1px solid #cbd5e1; padding: 8px 0; font-size: 14px; }
        .review-item:last-child { border-bottom: none; }
        .review-word { font-weight: bold; color: var(--dark-color); }
        .review-mean { color: #475569; }

        .disabled-area { pointer-events: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body style="background-color: #f1f5f9; margin: 0; padding: 0;">

    <div class="top-bar">
        <a href="../index.html" class="back-link">ğŸ”™ ë©”ì¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <div id="jp-n2-1-wrapper">
        <div class="quiz-container">
            <div class="control-panel">
                <div class="set-group">
                    <button class="set-btn active" onclick="JpN2_1.changeSet(0)">Set 1</button>
                    <button class="set-btn" onclick="JpN2_1.changeSet(1)">Set 2</button>
                    <button class="set-btn" onclick="JpN2_1.changeSet(2)">Set 3</button>
                    <button class="set-btn" onclick="JpN2_1.changeSet(3)">Set 4</button>
                    <button class="set-btn" onclick="JpN2_1.changeSet(4)">Set 5</button>
                    <button class="set-btn set-btn-all" onclick="JpN2_1.changeSet('all')">ALL</button>
                </div>
                <div class="size-group">
                    <button class="size-btn" onclick="JpN2_1.setSize('small')">ì‘ê²Œ</button>
                    <button class="size-btn active" onclick="JpN2_1.setSize('medium')" id="btnSizeM">ë³´í†µ</button>
                    <button class="size-btn" onclick="JpN2_1.setSize('large')">í¬ê²Œ</button>
                </div>
            </div>

            <div class="status-bar">
                <div class="status-item"><span>ğŸ“</span><span id="qCount_n2_1">1 / 20</span></div>
                <div class="status-item"><span class="timer-icon">â±ï¸</span><span id="timerDisplay_n2_1">0s</span></div>
                <div class="status-item score-box"><span>ğŸ†</span><span id="liveScore_n2_1">0</span></div>
            </div>

            <div class="question-card">
                <div class="word-row">
                    <div id="qWord_n2_1"><ruby>å˜èª<rt>ãŸã‚“ã”</rt></ruby></div>
                    <button class="audio-btn" onclick="JpN2_1.speak()" title="ë“£ê¸°">ğŸ”Š</button>
                </div>
                <div class="example-box">
                    <span id="qExample_n2_1">...</span>
                    <div class="hint-box" id="qHint_n2_1">...</div>
                </div>
            </div>

            <div class="options-grid" id="qOptions_n2_1"></div>

            <button id="btnNext_n2_1" class="next-btn" onclick="JpN2_1.nextQuestion()">ë‹¤ìŒ ë¬¸ì œ â–¶</button>

            <div id="resultScreen_n2_1">
                <h2 style="color:#1e3a8a; margin:0 0 10px 0;">ê²°ê³¼ ë¦¬í¬íŠ¸</h2>
                <div style="font-size:36px; font-weight:bold; color:#1e3a8a; margin-bottom:5px;"><span id="finalScore_n2_1">0</span>ì </div>
                <div style="font-size:14px; color:#64748b; margin-bottom:15px;">(ì´ì  <span id="maxScore_n2_1">0</span>ì  ì¤‘)</div>
                <div id="wrongListHeader_n2_1" style="width:100%; text-align:left; font-size:14px; font-weight:bold; color:#333; margin-bottom:5px;">âŒ í‹€ë¦° ë‹¨ì–´</div>
                <div class="review-list" id="wrongList_n2_1"></div>
                <button class="next-btn" style="display:block; width:auto; padding:10px 30px;" onclick="JpN2_1.initGame()">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
    (function() {
        // N2 1íƒ„ ë°ì´í„°: ë¹„ì¦ˆë‹ˆìŠ¤/ì¶”ìƒ ëª…ì‚¬ & ë™ì‚¬ 100ê°œ
        const dataPool = [
            // Set 1: ë¹„ì¦ˆë‹ˆìŠ¤, ê²½ì œ, ê²½ì˜ (Business)
            {q:"æ™¯æ°—", y:"ã‘ã„ã", m:"ê²½ê¸°", ex:"å›½ã®<span class='highlight'>æ™¯æ°—</span>ãŒå›å¾©ã™ã‚‹ã€‚", tr:"ë‚˜ë¼ì˜ ê²½ê¸°ê°€ íšŒë³µë˜ë‹¤."},
            {q:"äºˆç®—", y:"ã‚ˆã•ã‚“", m:"ì˜ˆì‚°", ex:"æ¥å¹´åº¦ã®<span class='highlight'>äºˆç®—</span>ã‚’çµ„ã‚€ã€‚", tr:"ë‚´ë…„ë„ ì˜ˆì‚°ì„ ì§œë‹¤."},
            {q:"å¥‘ç´„", y:"ã‘ã„ã‚„ã", m:"ê³„ì•½", ex:"ä¼šç¤¾ã¨<span class='highlight'>å¥‘ç´„</span>ã‚’çµã¶ã€‚", tr:"íšŒì‚¬ì™€ ê³„ì•½ì„ ë§ºë‹¤."},
            {q:"çµŒå–¶", y:"ã‘ã„ãˆã„", m:"ê²½ì˜", ex:"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’<span class='highlight'>çµŒå–¶</span>ã—ã¦ã„ã‚‹ã€‚", tr:"ë ˆìŠ¤í† ë‘ì„ ê²½ì˜í•˜ê³  ìˆë‹¤."},
            {q:"è²¡ç”£", y:"ã–ã„ã•ã‚“", m:"ì¬ì‚°", ex:"å¤šãã®<span class='highlight'>è²¡ç”£</span>ã‚’æ®‹ã™ã€‚", tr:"ë§ì€ ì¬ì‚°ì„ ë‚¨ê¸°ë‹¤."},
            {q:"åˆ©ç›Š", y:"ã‚Šãˆã", m:"ì´ìµ", ex:"ä¼šç¤¾ã®<span class='highlight'>åˆ©ç›Š</span>ãŒä¸ŠãŒã‚‹ã€‚", tr:"íšŒì‚¬ì˜ ì´ìµì´ ì˜¤ë¥´ë‹¤."},
            {q:"è²»ç”¨", y:"ã²ã‚ˆã†", m:"ë¹„ìš©", ex:"æ—…è¡Œã®<span class='highlight'>è²»ç”¨</span>ã‚’è²¯ã‚ã‚‹ã€‚", tr:"ì—¬í–‰ ë¹„ìš©ì„ ëª¨ìœ¼ë‹¤."},
            {q:"è² æ‹…", y:"ãµãŸã‚“", m:"ë¶€ë‹´", ex:"è²»ç”¨ã®<span class='highlight'>è² æ‹…</span>ãŒå¤§ãã„ã€‚", tr:"ë¹„ìš© ë¶€ë‹´ì´ í¬ë‹¤."},
            {q:"çµ„ç¹”", y:"ãã—ã", m:"ì¡°ì§", ex:"æ–°ã—ã„<span class='highlight'>çµ„ç¹”</span>ã‚’ä½œã‚‹ã€‚", tr:"ìƒˆë¡œìš´ ì¡°ì§ì„ ë§Œë“¤ë‹¤."},
            {q:"å®Ÿç¸¾", y:"ã˜ã£ã›ã", m:"ì‹¤ì ", ex:"å–¶æ¥­ã®<span class='highlight'>å®Ÿç¸¾</span>ã‚’ä¸Šã’ã‚‹ã€‚", tr:"ì˜ì—… ì‹¤ì ì„ ì˜¬ë¦¬ë‹¤."},
            {q:"æ¥­ç¸¾", y:"ãã‚‡ã†ã›ã", m:"ì—…ì ", ex:"ä¼šç¤¾ã®<span class='highlight'>æ¥­ç¸¾</span>ãŒæ‚ªã„ã€‚", tr:"íšŒì‚¬ì˜ ì—…ì ì´ ë‚˜ì˜ë‹¤."},
            {q:"è³‡æœ¬", y:"ã—ã»ã‚“", m:"ìë³¸", ex:"äº‹æ¥­ã®<span class='highlight'>è³‡æœ¬</span>é‡‘ã€‚", tr:"ì‚¬ì—…ì˜ ìë³¸ê¸ˆ."},
            {q:"æ–¹é‡", y:"ã»ã†ã—ã‚“", m:"ë°©ì¹¨", ex:"æ•™è‚²<span class='highlight'>æ–¹é‡</span>ã‚’æ±ºã‚ã‚‹ã€‚", tr:"êµìœ¡ ë°©ì¹¨ì„ ì •í•˜ë‹¤."},
            {q:"å¯¾ç­–", y:"ãŸã„ã•ã", m:"ëŒ€ì±…", ex:"åœ°éœ‡ã®<span class='highlight'>å¯¾ç­–</span>ã‚’ç«‹ã¦ã‚‹ã€‚", tr:"ì§€ì§„ ëŒ€ì±…ì„ ì„¸ìš°ë‹¤."},
            {q:"å®Ÿæ–½", y:"ã˜ã£ã—", m:"ì‹¤ì‹œ", ex:"ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’<span class='highlight'>å®Ÿæ–½</span>ã™ã‚‹ã€‚", tr:"ì„¤ë¬¸ì¡°ì‚¬ë¥¼ ì‹¤ì‹œí•˜ë‹¤."},
            {q:"æ¡ä»¶", y:"ã˜ã‚‡ã†ã‘ã‚“", m:"ì¡°ê±´", ex:"åƒã<span class='highlight'>æ¡ä»¶</span>ã‚’ç¢ºèªã™ã‚‹ã€‚", tr:"ì¼í•  ì¡°ê±´ì„ í™•ì¸í•˜ë‹¤."},
            {q:"ç¯„å›²", y:"ã¯ã‚“ã„", m:"ë²”ìœ„", ex:"è©¦é¨“ã®<span class='highlight'>ç¯„å›²</span>ãŒåºƒã„ã€‚", tr:"ì‹œí—˜ ë²”ìœ„ê°€ ë„“ë‹¤."},
            {q:"è¦æ¨¡", y:"ãã¼", m:"ê·œëª¨", ex:"ä¼šç¤¾ã®<span class='highlight'>è¦æ¨¡</span>ã‚’æ‹¡å¤§ã™ã‚‹ã€‚", tr:"íšŒì‚¬ ê·œëª¨ë¥¼ í™•ëŒ€í•˜ë‹¤."},
            {q:"èƒ½ç‡", y:"ã®ã†ã‚Šã¤", m:"ëŠ¥ë¥ ", ex:"ä»•äº‹ã®<span class='highlight'>èƒ½ç‡</span>ãŒä¸ŠãŒã‚‹ã€‚", tr:"ì¼ì˜ ëŠ¥ë¥ ì´ ì˜¤ë¥´ë‹¤."},
            {q:"æ¨©åˆ©", y:"ã‘ã‚“ã‚Š", m:"ê¶Œë¦¬", ex:"å›½æ°‘ã®<span class='highlight'>æ¨©åˆ©</span>ã‚’å®ˆã‚‹ã€‚", tr:"êµ­ë¯¼ì˜ ê¶Œë¦¬ë¥¼ ì§€í‚¤ë‹¤."},

            // Set 2: ì‚¬íšŒ, ìƒí™œ, í™˜ê²½ (Society & Environment)
            {q:"ç’°å¢ƒ", y:"ã‹ã‚“ãã‚‡ã†", m:"í™˜ê²½", ex:"è‡ªç„¶<span class='highlight'>ç’°å¢ƒ</span>ã‚’å®ˆã‚‹ã€‚", tr:"ìì—°í™˜ê²½ì„ ì§€í‚¤ë‹¤."},
            {q:"æ±šæŸ“", y:"ãŠã›ã‚“", m:"ì˜¤ì—¼", ex:"å¤§æ°—ãŒ<span class='highlight'>æ±šæŸ“</span>ã•ã‚Œã¦ã„ã‚‹ã€‚", tr:"ëŒ€ê¸°ê°€ ì˜¤ì—¼ë˜ì–´ ìˆë‹¤."},
            {q:"ä¸–é–“", y:"ã›ã‘ã‚“", m:"ì„¸ìƒ/ì„¸ê°„", ex:"<span class='highlight'>ä¸–é–“</span>ã®æ³¨ç›®ã‚’é›†ã‚ã‚‹ã€‚", tr:"ì„¸ê°„ì˜ ì£¼ëª©ì„ ëª¨ìœ¼ë‹¤."},
            {q:"å¸¸è­˜", y:"ã˜ã‚‡ã†ã—ã", m:"ìƒì‹", ex:"ãã‚Œã¯ç¤¾ä¼šã®<span class='highlight'>å¸¸è­˜</span>ã ã€‚", tr:"ê·¸ê²ƒì€ ì‚¬íšŒì˜ ìƒì‹ì´ë‹¤."},
            {q:"å·®åˆ¥", y:"ã•ã¹ã¤", m:"ì°¨ë³„", ex:"äººç¨®<span class='highlight'>å·®åˆ¥</span>ã‚’ãªãã™ã€‚", tr:"ì¸ì¢… ì°¨ë³„ì„ ì—†ì• ë‹¤."},
            {q:"çŠ¯ç½ª", y:"ã¯ã‚“ã–ã„", m:"ë²”ì£„", ex:"<span class='highlight'>çŠ¯ç½ª</span>ã‚’é˜²æ­¢ã™ã‚‹ã€‚", tr:"ë²”ì£„ë¥¼ ë°©ì§€í•˜ë‹¤."},
            {q:"è¢«å®³", y:"ã²ãŒã„", m:"í”¼í•´", ex:"å°é¢¨ã®<span class='highlight'>è¢«å®³</span>ãŒå‡ºã‚‹ã€‚", tr:"íƒœí’ í”¼í•´ê°€ ë°œìƒí•˜ë‹¤."},
            {q:"å½±éŸ¿", y:"ãˆã„ãã‚‡ã†", m:"ì˜í–¥", ex:"è¦ªã®<span class='highlight'>å½±éŸ¿</span>ã‚’å—ã‘ã‚‹ã€‚", tr:"ë¶€ëª¨ì˜ ì˜í–¥ì„ ë°›ë‹¤."},
            {q:"è³‡æº", y:"ã—ã’ã‚“", m:"ìì›", ex:"å¤©ç„¶<span class='highlight'>è³‡æº</span>ãŒè±Šå¯Œã ã€‚", tr:"ì²œì—°ìì›ì´ í’ë¶€í•˜ë‹¤."},
            {q:"åˆ¶åº¦", y:"ã›ã„ã©", m:"ì œë„", ex:"æ–°ã—ã„<span class='highlight'>åˆ¶åº¦</span>ã‚’å°å…¥ã™ã‚‹ã€‚", tr:"ìƒˆë¡œìš´ ì œë„ë¥¼ ë„ì…í•˜ë‹¤."},
            {q:"äº‹æƒ…", y:"ã˜ã˜ã‚‡ã†", m:"ì‚¬ì •", ex:"äº¤é€š<span class='highlight'>äº‹æƒ…</span>ãŒæ‚ªåŒ–ã™ã‚‹ã€‚", tr:"êµí†µ ì‚¬ì •ì´ ì•…í™”ë˜ë‹¤."},
            {q:"ç¾çŠ¶", y:"ã’ã‚“ã˜ã‚‡ã†", m:"í˜„ìƒ(í˜„ì¬ìƒíƒœ)", ex:"<span class='highlight'>ç¾çŠ¶</span>ã‚’ç¶­æŒã™ã‚‹ã€‚", tr:"í˜„ìƒì„ ìœ ì§€í•˜ë‹¤."},
            {q:"ç¾è±¡", y:"ã’ã‚“ã—ã‚‡ã†", m:"í˜„ìƒ(ì¼ì–´ë‚˜ëŠ” ì¼)", ex:"ä¸æ€è­°ãª<span class='highlight'>ç¾è±¡</span>ãŒèµ·ãã‚‹ã€‚", tr:"ë¶ˆê°€ì‚¬ì˜í•œ í˜„ìƒì´ ì¼ì–´ë‚˜ë‹¤."},
            {q:"å½¹å‰²", y:"ã‚„ãã‚ã‚Š", m:"ì—­í• ", ex:"è‡ªåˆ†ã®<span class='highlight'>å½¹å‰²</span>ã‚’æœãŸã™ã€‚", tr:"ìì‹ ì˜ ì—­í• ì„ ë‹¤í•˜ë‹¤."},
            {q:"ç¾©å‹™", y:"ãã‚€", m:"ì˜ë¬´", ex:"ç´ç¨ã®<span class='highlight'>ç¾©å‹™</span>ãŒã‚ã‚‹ã€‚", tr:"ë‚©ì„¸ì˜ ì˜ë¬´ê°€ ìˆë‹¤."},
            {q:"è²¬ä»»", y:"ã›ãã«ã‚“", m:"ì±…ì„", ex:"äº‹æ•…ã®<span class='highlight'>è²¬ä»»</span>ã‚’å–ã‚‹ã€‚", tr:"ì‚¬ê³ ì˜ ì±…ì„ì„ ì§€ë‹¤."},
            {q:"å€™è£œ", y:"ã“ã†ã»", m:"í›„ë³´", ex:"å¤§çµ±é ˜ã®<span class='highlight'>å€™è£œ</span>ã«ãªã‚‹ã€‚", tr:"ëŒ€í†µë ¹ í›„ë³´ê°€ ë˜ë‹¤."},
            {q:"æ”¯æŒ", y:"ã—ã˜", m:"ì§€ì§€", ex:"å¤šãã®<span class='highlight'>æ”¯æŒ</span>ã‚’å¾—ã‚‹ã€‚", tr:"ë§ì€ ì§€ì§€ë¥¼ ì–»ë‹¤."},
            {q:"æŠ•ç¥¨", y:"ã¨ã†ã²ã‚‡ã†", m:"íˆ¬í‘œ", ex:"é¸æŒ™ã§<span class='highlight'>æŠ•ç¥¨</span>ã™ã‚‹ã€‚", tr:"ì„ ê±°ì—ì„œ íˆ¬í‘œí•˜ë‹¤."},
            {q:"æ‰¹åˆ¤", y:"ã²ã¯ã‚“", m:"ë¹„íŒ", ex:"æ”¿åºœã‚’<span class='highlight'>æ‰¹åˆ¤</span>ã™ã‚‹ã€‚", tr:"ì •ë¶€ë¥¼ ë¹„íŒí•˜ë‹¤."},

            // Set 3: ì¶”ìƒì  ê°œë…, ì‚¬ê³ , ì‹¬ë¦¬ (Abstract)
            {q:"æ„è­˜", y:"ã„ã—ã", m:"ì˜ì‹", ex:"ç’°å¢ƒå•é¡Œã‚’<span class='highlight'>æ„è­˜</span>ã™ã‚‹ã€‚", tr:"í™˜ê²½ ë¬¸ì œë¥¼ ì˜ì‹í•˜ë‹¤."},
            {q:"æ„Ÿè¦š", y:"ã‹ã‚“ã‹ã", m:"ê°ê°", ex:"è‰²å½©ã®<span class='highlight'>æ„Ÿè¦š</span>ãŒå„ªã‚Œã¦ã„ã‚‹ã€‚", tr:"ìƒ‰ì±„ ê°ê°ì´ ë›°ì–´ë‚˜ë‹¤."},
            {q:"æ„Ÿæƒ…", y:"ã‹ã‚“ã˜ã‚‡ã†", m:"ê°ì •", ex:"<span class='highlight'>æ„Ÿæƒ…</span>ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã€‚", tr:"ê°ì •ì„ ì¡°ì ˆí•˜ë‹¤."},
            {q:"æ„Ÿå‹•", y:"ã‹ã‚“ã©ã†", m:"ê°ë™", ex:"æ˜ ç”»ã‚’è¦‹ã¦<span class='highlight'>æ„Ÿå‹•</span>ã—ãŸã€‚", tr:"ì˜í™”ë¥¼ ë³´ê³  ê°ë™í–ˆë‹¤."},
            {q:"é–¢å¿ƒ", y:"ã‹ã‚“ã—ã‚“", m:"ê´€ì‹¬", ex:"æ”¿æ²»ã«<span class='highlight'>é–¢å¿ƒ</span>ãŒã‚ã‚‹ã€‚", tr:"ì •ì¹˜ì— ê´€ì‹¬ì´ ìˆë‹¤."},
            {q:"æœŸå¾…", y:"ããŸã„", m:"ê¸°ëŒ€", ex:"è¦ªã®<span class='highlight'>æœŸå¾…</span>ã«å¿œãˆã‚‹ã€‚", tr:"ë¶€ëª¨ì˜ ê¸°ëŒ€ì— ë¶€ì‘í•˜ë‹¤."},
            {q:"å¸Œæœ›", y:"ãã¼ã†", m:"í¬ë§", ex:"å°†æ¥ã®<span class='highlight'>å¸Œæœ›</span>ã‚’èªã‚‹ã€‚", tr:"ì¥ë˜ í¬ë§ì„ ì´ì•¼ê¸°í•˜ë‹¤."},
            {q:"è‹¦åŠ´", y:"ãã‚ã†", m:"ê³ ìƒ/ìˆ˜ê³ ", ex:"è‹¥ã„é ƒã«<span class='highlight'>è‹¦åŠ´</span>ã—ãŸã€‚", tr:"ì Šì€ ì‹œì ˆì— ê³ ìƒí–ˆë‹¤."},
            {q:"æ„æ€", y:"ã„ã—", m:"ì˜ì‚¬(ìƒê°)", ex:"æœ¬äººã®<span class='highlight'>æ„æ€</span>ã‚’ç¢ºèªã™ã‚‹ã€‚", tr:"ë³¸ì¸ì˜ ì˜ì‚¬ë¥¼ í™•ì¸í•˜ë‹¤."},
            {q:"æ„å¿—", y:"ã„ã—", m:"ì˜ì§€(ë§ˆìŒ)", ex:"<span class='highlight'>æ„å¿—</span>ãŒå¼·ã„äººã ã€‚", tr:"ì˜ì§€ê°€ ê°•í•œ ì‚¬ëŒì´ë‹¤."},
            {q:"æ€æƒ³", y:"ã—ãã†", m:"ì‚¬ìƒ", ex:"è¥¿æ´‹ã®<span class='highlight'>æ€æƒ³</span>ã‚’å­¦ã¶ã€‚", tr:"ì„œì–‘ ì‚¬ìƒì„ ë°°ìš°ë‹¤."},
            {q:"ç†æƒ³", y:"ã‚Šãã†", m:"ì´ìƒ", ex:"<span class='highlight'>ç†æƒ³</span>ã¨ç¾å®Ÿã¯é•ã†ã€‚", tr:"ì´ìƒê³¼ í˜„ì‹¤ì€ ë‹¤ë¥´ë‹¤."},
            {q:"æƒ³åƒ", y:"ãã†ãã†", m:"ìƒìƒ", ex:"<span class='highlight'>æƒ³åƒ</span>åŠ›ãŒè±Šã‹ã ã€‚", tr:"ìƒìƒë ¥ì´ í’ë¶€í•˜ë‹¤."},
            {q:"å°è±¡", y:"ã„ã‚“ã—ã‚‡ã†", m:"ì¸ìƒ", ex:"ç¬¬ä¸€<span class='highlight'>å°è±¡</span>ãŒè‰¯ã„ã€‚", tr:"ì²«ì¸ìƒì´ ì¢‹ë‹¤."},
            {q:"å‚¾å‘", y:"ã‘ã„ã“ã†", m:"ê²½í–¥", ex:"æœ€è¿‘ã®è‹¥è€…ã®<span class='highlight'>å‚¾å‘</span>ã€‚", tr:"ìš”ì¦˜ ì Šì€ì´ë“¤ì˜ ê²½í–¥."},
            {q:"æ…‹åº¦", y:"ãŸã„ã©", m:"íƒœë„", ex:"çœŸé¢ç›®ãª<span class='highlight'>æ…‹åº¦</span>ã§èãã€‚", tr:"ì„±ì‹¤í•œ íƒœë„ë¡œ ë“£ë‹¤."},
            {q:"å§¿å‹¢", y:"ã—ã›ã„", m:"ìì„¸", ex:"å­¦ã¶<span class='highlight'>å§¿å‹¢</span>ãŒå¤§åˆ‡ã ã€‚", tr:"ë°°ìš°ëŠ” ìì„¸ê°€ ì¤‘ìš”í•˜ë‹¤."},
            {q:"é­…åŠ›", y:"ã¿ã‚Šã‚‡ã", m:"ë§¤ë ¥", ex:"å½¼å¥³ã®<span class='highlight'>é­…åŠ›</span>ã«æƒ¹ã‹ã‚Œã‚‹ã€‚", tr:"ê·¸ë…€ì˜ ë§¤ë ¥ì— ëŒë¦¬ë‹¤."},
            {q:"ç‰¹å¾´", y:"ã¨ãã¡ã‚‡ã†", m:"íŠ¹ì§•", ex:"ã“ã®è£½å“ã®<span class='highlight'>ç‰¹å¾´</span>ã€‚", tr:"ì´ ì œí’ˆì˜ íŠ¹ì§•."},
            {q:"è©•ä¾¡", y:"ã²ã‚‡ã†ã‹", m:"í‰ê°€", ex:"é«˜ã<span class='highlight'>è©•ä¾¡</span>ã•ã‚Œã¦ã„ã‚‹ã€‚", tr:"ë†’ê²Œ í‰ê°€ë°›ê³  ìˆë‹¤."},

            // Set 4: í•„ìˆ˜ ë™ì‚¬ 1 - ë³€í™”, ì‘ìš© (Verbs 1)
            {q:"åŠã¼ã™", y:"ãŠã‚ˆã¼ã™", m:"ë¯¸ì¹˜ë‹¤(ì˜í–¥)", ex:"æ‚ªå½±éŸ¿ã‚’<span class='highlight'>åŠã¼ã™</span>ã€‚", tr:"ì•…ì˜í–¥ì„ ë¯¸ì¹˜ë‹¤."},
            {q:"å ã‚ã‚‹", y:"ã—ã‚ã‚‹", m:"ì°¨ì§€í•˜ë‹¤", ex:"éåŠæ•°ã‚’<span class='highlight'>å ã‚ã‚‹</span>ã€‚", tr:"ê³¼ë°˜ìˆ˜ë¥¼ ì°¨ì§€í•˜ë‹¤."},
            {q:"å„ªã‚Œã‚‹", y:"ã™ãã‚Œã‚‹", m:"ë›°ì–´ë‚˜ë‹¤/ìš°ìˆ˜í•˜ë‹¤", ex:"æŠ€è¡“ãŒ<span class='highlight'>å„ªã‚Œã¦</span>ã„ã‚‹ã€‚", tr:"ê¸°ìˆ ì´ ë›°ì–´ë‚˜ë‹¤."},
            {q:"ç•°ãªã‚‹", y:"ã“ã¨ãªã‚‹", m:"ë‹¤ë¥´ë‹¤(ê²©ì‹)", ex:"äº‹å®Ÿã¨<span class='highlight'>ç•°ãªã‚‹</span>ã€‚", tr:"ì‚¬ì‹¤ê³¼ ë‹¤ë¥´ë‹¤."},
            {q:"ç”Ÿã˜ã‚‹", y:"ã—ã‚‡ã†ã˜ã‚‹", m:"ìƒê¸°ë‹¤/ë°œìƒí•˜ë‹¤", ex:"å•é¡ŒãŒ<span class='highlight'>ç”Ÿã˜ã‚‹</span>ã€‚", tr:"ë¬¸ì œê°€ ìƒê¸°ë‹¤."},
            {q:"é”ã™ã‚‹", y:"ãŸã£ã™ã‚‹", m:"ë‹¬í•˜ë‹¤/ë„ë‹¬í•˜ë‹¤", ex:"ç›®çš„åœ°ã«<span class='highlight'>é”ã™ã‚‹</span>ã€‚", tr:"ëª©ì ì§€ì— ë„ë‹¬í•˜ë‹¤."},
            {q:"é€šã˜ã‚‹", y:"ã¤ã†ã˜ã‚‹", m:"í†µí•˜ë‹¤", ex:"æ„å‘³ãŒ<span class='highlight'>é€šã˜ã‚‹</span>ã€‚", tr:"ì˜ë¯¸ê°€ í†µí•˜ë‹¤."},
            {q:"åŠªã‚ã‚‹", y:"ã¤ã¨ã‚ã‚‹", m:"ë…¸ë ¥í•˜ë‹¤/ì• ì“°ë‹¤", ex:"è§£æ±ºã«<span class='highlight'>åŠªã‚ã‚‹</span>ã€‚", tr:"í•´ê²°ì— í˜ì“°ë‹¤(ë…¸ë ¥í•˜ë‹¤)."},
            {q:"å¼·ã‚ã‚‹", y:"ã¤ã‚ˆã‚ã‚‹", m:"ê°•í™”í•˜ë‹¤/ì„¸ê²Œ í•˜ë‹¤", ex:"ç«ã‚’<span class='highlight'>å¼·ã‚ã‚‹</span>ã€‚", tr:"ë¶ˆì„ ì„¸ê²Œ í•˜ë‹¤."},
            {q:"åºƒã‚ã‚‹", y:"ã²ã‚ã‚ã‚‹", m:"ë„ë¦¬ í¼ëœ¨ë¦¬ë‹¤", ex:"å™‚ã‚’<span class='highlight'>åºƒã‚ã‚‹</span>ã€‚", tr:"ì†Œë¬¸ì„ í¼ëœ¨ë¦¬ë‹¤."},
            {q:"æ·±ã‚ã‚‹", y:"ãµã‹ã‚ã‚‹", m:"ê¹Šê²Œ í•˜ë‹¤", ex:"ç†è§£ã‚’<span class='highlight'>æ·±ã‚ã‚‹</span>ã€‚", tr:"ì´í•´ë¥¼ ê¹Šê²Œ í•˜ë‹¤."},
            {q:"å«ã‚ã‚‹", y:"ãµãã‚ã‚‹", m:"í¬í•¨í•˜ë‹¤", ex:"ç¨é‡‘ã‚’<span class='highlight'>å«ã‚ã‚‹</span>ã€‚", tr:"ì„¸ê¸ˆì„ í¬í•¨í•˜ë‹¤."},
            {q:"èªã‚ã‚‹", y:"ã¿ã¨ã‚ã‚‹", m:"ì¸ì •í•˜ë‹¤", ex:"å¤±æ•—ã‚’<span class='highlight'>èªã‚ã‚‹</span>ã€‚", tr:"ì‹¤íŒ¨ë¥¼ ì¸ì •í•˜ë‹¤."},
            {q:"æ±‚ã‚ã‚‹", y:"ã‚‚ã¨ã‚ã‚‹", m:"êµ¬í•˜ë‹¤/ìš”êµ¬í•˜ë‹¤", ex:"åŠ©ã‘ã‚’<span class='highlight'>æ±‚ã‚ã‚‹</span>ã€‚", tr:"ë„ì›€ì„ êµ¬í•˜ë‹¤(ìš”ì²­í•˜ë‹¤)."},
            {q:"å¾—ç‚¹", y:"ã¨ãã¦ã‚“", m:"ë“ì /ì ìˆ˜ ì–»ê¸°", ex:"é«˜<span class='highlight'>å¾—ç‚¹</span>ã‚’å–ã‚‹ã€‚", tr:"ë†’ì€ ì ìˆ˜(ë“ì )ë¥¼ ë”°ë‹¤."},
            {q:"å¾—ã‚‹", y:"ãˆã‚‹", m:"ì–»ë‹¤", ex:"çŸ¥è­˜ã‚’<span class='highlight'>å¾—ã‚‹</span>ã€‚", tr:"ì§€ì‹ì„ ì–»ë‹¤."},
            {q:"ä¸ãˆã‚‹", y:"ã‚ãŸãˆã‚‹", m:"ì£¼ë‹¤/ë¼ì¹˜ë‹¤", ex:"å½±éŸ¿ã‚’<span class='highlight'>ä¸ãˆã‚‹</span>ã€‚", tr:"ì˜í–¥ì„ ì£¼ë‹¤(ë¼ì¹˜ë‹¤)."},
            {q:"å¢—ã™", y:"ã¾ã™", m:"ë¶‡ë‹¤/ëŠ˜ë‹¤/ë”í•˜ë‹¤", ex:"ä¸å®‰ãŒ<span class='highlight'>å¢—ã™</span>ã€‚", tr:"ë¶ˆì•ˆì´ ë”í•´ì§€ë‹¤."},
            {q:"æ¸›ã‚‰ã™", y:"ã¸ã‚‰ã™", m:"ì¤„ì´ë‹¤", ex:"ã‚´ãƒŸã‚’<span class='highlight'>æ¸›ã‚‰ã™</span>ã€‚", tr:"ì“°ë ˆê¸°ë¥¼ ì¤„ì´ë‹¤."},
            {q:"é–¢ã‚ã‚‹", y:"ã‹ã‹ã‚ã‚‹", m:"ê´€ê³„ë˜ë‹¤/ìƒê´€í•˜ë‹¤", ex:"å‘½ã«<span class='highlight'>é–¢ã‚ã‚‹</span>å•é¡Œã€‚", tr:"ëª©ìˆ¨ê³¼ ê´€ê³„ëœ(ì§ê²°ëœ) ë¬¸ì œ."},

            // Set 5: í•„ìˆ˜ ë™ì‚¬ 2 - ì‚¬ê³ , í–‰ë™ (Verbs 2)
            {q:"è£œã†", y:"ãŠããªã†", m:"ë³´ì¶©í•˜ë‹¤", ex:"ä¸è¶³ã‚’<span class='highlight'>è£œã†</span>ã€‚", tr:"ë¶€ì¡±ë¶„ì„ ë³´ì¶©í•˜ë‹¤."},
            {q:"çœã", y:"ã¯ã¶ã", m:"ìƒëµí•˜ë‹¤/ëœë‹¤", ex:"æ‰‹é–“ã‚’<span class='highlight'>çœã</span>ã€‚", tr:"ìˆ˜ê³ ë¥¼ ëœë‹¤(ìƒëµí•˜ë‹¤)."},
            {q:"ç¨¼ã", y:"ã‹ã›ã", m:"ë²Œë‹¤(ëˆ)", ex:"ãŠé‡‘ã‚’<span class='highlight'>ç¨¼ã</span>ã€‚", tr:"ëˆì„ ë²Œë‹¤."},
            {q:"ç«¶ã†", y:"ããã†", m:"ê²¨ë£¨ë‹¤/ê²½ìŸí•˜ë‹¤", ex:"é€Ÿã•ã‚’<span class='highlight'>ç«¶ã†</span>ã€‚", tr:"ì†ë„ë¥¼ ê²¨ë£¨ë‹¤."},
            {q:"é€†ã‚‰ã†", y:"ã•ã‹ã‚‰ã†", m:"ê±°ìŠ¤ë¥´ë‹¤/ë°˜í•­í•˜ë‹¤", ex:"è¦ªã«<span class='highlight'>é€†ã‚‰ã†</span>ã€‚", tr:"ë¶€ëª¨ì—ê²Œ ë°˜í•­í•˜ë‹¤."},
            {q:"å¾“ã†", y:"ã—ãŸãŒã†", m:"ë”°ë¥´ë‹¤/ë³µì¢…í•˜ë‹¤", ex:"ãƒ«ãƒ¼ãƒ«ã«<span class='highlight'>å¾“ã†</span>ã€‚", tr:"ê·œì¹™ì„ ë”°ë¥´ë‹¤."},
            {q:"å‚™ãˆã‚‹", y:"ããªãˆã‚‹", m:"ê°–ì¶”ë‹¤/ëŒ€ë¹„í•˜ë‹¤", ex:"åœ°éœ‡ã«<span class='highlight'>å‚™ãˆã‚‹</span>ã€‚", tr:"ì§€ì§„ì— ëŒ€ë¹„í•˜ë‹¤."},
            {q:"å±ã™ã‚‹", y:"ããã™ã‚‹", m:"ì†í•˜ë‹¤", ex:"ãƒ†ãƒ‹ã‚¹éƒ¨ã«<span class='highlight'>å±ã™ã‚‹</span>ã€‚", tr:"í…Œë‹ˆìŠ¤ë¶€ì— ì†í•˜ë‹¤."},
            {q:"æˆ¦ã†", y:"ãŸãŸã‹ã†", m:"ì‹¸ìš°ë‹¤/ì „íˆ¬í•˜ë‹¤", ex:"æ•µã¨<span class='highlight'>æˆ¦ã†</span>ã€‚", tr:"ì ê³¼ ì‹¸ìš°ë‹¤."},
            {q:"é©ã™ã‚‹", y:"ã¦ãã™ã‚‹", m:"ì•Œë§ë‹¤/ì í•©í•˜ë‹¤", ex:"ã“ã®ä»•äº‹ã«<span class='highlight'>é©ã—ã¦</span>ã„ã‚‹ã€‚", tr:"ì´ ì¼ì— ì í•©í•˜ë‹¤."},
            {q:"è§£ã", y:"ã¨ã", m:"í’€ë‹¤", ex:"å•é¡Œã‚’<span class='highlight'>è§£ã</span>ã€‚", tr:"ë¬¸ì œë¥¼ í’€ë‹¤."},
            {q:"è¿°ã¹ã‚‹", y:"ã®ã¹ã‚‹", m:"ì§„ìˆ í•˜ë‹¤/ë§í•˜ë‹¤", ex:"æ„è¦‹ã‚’<span class='highlight'>è¿°ã¹ã‚‹</span>ã€‚", tr:"ì˜ê²¬ì„ ë§í•˜ë‹¤(ì§„ìˆ í•˜ë‹¤)."},
            {q:"é‡ã‚‹", y:"ã¯ã‹ã‚‹", m:"ì¬ë‹¤(ë¬´ê²Œ/ì–‘)", ex:"ä½“é‡ã‚’<span class='highlight'>é‡ã‚‹</span>ã€‚", tr:"ì²´ì¤‘ì„ ì¬ë‹¤."},
            {q:"æ¸¬ã‚‹", y:"ã¯ã‹ã‚‹", m:"ì¬ë‹¤(ê¸¸ì´/ê¹Šì´)", ex:"ç†±ã‚’<span class='highlight'>æ¸¬ã‚‹</span>ã€‚", tr:"ì—´ì„ ì¬ë‹¤."},
            {q:"è¨ˆã‚‹", y:"ã¯ã‹ã‚‹", m:"ì¬ë‹¤(ì‹œê°„)", ex:"ã‚¿ã‚¤ãƒ ã‚’<span class='highlight'>è¨ˆã‚‹</span>ã€‚", tr:"ì‹œê°„ì„ ì¬ë‹¤."},
            {q:"ä»»ã›ã‚‹", y:"ã¾ã‹ã›ã‚‹", m:"ë§¡ê¸°ë‹¤", ex:"ä»•äº‹ã‚’<span class='highlight'>ä»»ã›ã‚‹</span>ã€‚", tr:"ì¼ì„ ë§¡ê¸°ë‹¤."},
            {q:"ç›®æŒ‡ã™", y:"ã‚ã–ã™", m:"ëª©í‘œë¡œ í•˜ë‹¤", ex:"å„ªå‹ã‚’<span class='highlight'>ç›®æŒ‡ã™</span>ã€‚", tr:"ìš°ìŠ¹ì„ ëª©í‘œë¡œ í•˜ë‹¤."},
            {q:"ç”¨ã„ã‚‹", y:"ã‚‚ã¡ã„ã‚‹", m:"ì´ìš©í•˜ë‹¤/ì“°ë‹¤", ex:"æ–°ã—ã„æ–¹æ³•ã‚’<span class='highlight'>ç”¨ã„ã‚‹</span>ã€‚", tr:"ìƒˆë¡œìš´ ë°©ë²•ì„ ì´ìš©í•˜ë‹¤."},
            {q:"åŸºã¥ã", y:"ã‚‚ã¨ã¥ã", m:"ê¸°ì´ˆí•˜ë‹¤/ê·¼ê±°í•˜ë‹¤", ex:"äº‹å®Ÿã‚’<span class='highlight'>åŸºã¥ã</span>è©±ã€‚", tr:"ì‚¬ì‹¤ì— ê·¼ê±°í•œ ì´ì•¼ê¸°."},
            {q:"è¨±ã™", y:"ã‚†ã‚‹ã™", m:"ìš©ì„œí•˜ë‹¤/í—ˆë½í•˜ë‹¤", ex:"ç½ªã‚’<span class='highlight'>è¨±ã™</span>ã€‚", tr:"ì£„ë¥¼ ìš©ì„œí•˜ë‹¤."}
        ];

        let quizList = [];
        let currentIdx = 0;
        let score = 0;
        let attempts = 0;
        let currentMode = 0;
        let timerInterval = null;
        let seconds = 0;
        let wrongAnswers = []; 
        let maxPossibleScore = 0;

        const wrapper = document.getElementById('jp-n2-1-wrapper');
        const elQWord = document.getElementById('qWord_n2_1');
        const elQExample = document.getElementById('qExample_n2_1');
        const elQHint = document.getElementById('qHint_n2_1');
        const elOptions = document.getElementById('qOptions_n2_1');
        const elNextBtn = document.getElementById('btnNext_n2_1');
        const elResult = document.getElementById('resultScreen_n2_1');
        const elFinalScore = document.getElementById('finalScore_n2_1');
        const elMaxScore = document.getElementById('maxScore_n2_1');
        const elWrongList = document.getElementById('wrongList_n2_1');
        const elWrongHeader = document.getElementById('wrongListHeader_n2_1');
        const elQCount = document.getElementById('qCount_n2_1');
        const elTimer = document.getElementById('timerDisplay_n2_1');
        const elLiveScore = document.getElementById('liveScore_n2_1');

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function setSize(size) {
            wrapper.classList.remove('size-small', 'size-large');
            const btns = wrapper.querySelectorAll('.size-btn');
            btns.forEach(b => b.classList.remove('active'));

            if (size === 'small') {
                wrapper.classList.add('size-small');
                btns[0].classList.add('active');
            } else if (size === 'large') {
                wrapper.classList.add('size-large');
                btns[2].classList.add('active');
            } else {
                btns[1].classList.add('active');
            }
        }

        function changeSet(mode) {
            currentMode = mode;
            const btns = wrapper.querySelectorAll('.set-btn');
            btns.forEach(b => b.classList.remove('active'));
            let btnIdx = (mode === 'all') ? 5 : mode;
            btns[btnIdx].classList.add('active');
            initGame();
        }

        function initGame() {
            let targetData = [];
            if (currentMode === 'all') {
                targetData = shuffle([...dataPool]);
            } else {
                const start = currentMode * 20;
                const end = start + 20;
                targetData = shuffle(dataPool.slice(start, end));
            }

            quizList = targetData;
            currentIdx = 0;
            score = 0;
            wrongAnswers = [];
            maxPossibleScore = quizList.length * 10;

            elResult.style.display = 'none';
            updateStatus();
            loadQuestion();
        }

        function loadQuestion() {
            if (currentIdx >= quizList.length) {
                finishGame();
                return;
            }

            const data = quizList[currentIdx];
            attempts = 0; 
            
            resetTimer();
            startTimer();
            updateStatus();

            elQWord.innerHTML = `<ruby>${data.q}<rt>${data.y}</rt></ruby>`;
            elQExample.innerHTML = data.ex;
            
            elQHint.style.display = 'none';
            elQHint.innerText = `ğŸ’¡ í•´ì„: ${data.tr}`;

            elNextBtn.style.display = 'none';
            elOptions.innerHTML = '';
            elOptions.classList.remove('disabled-area');

            let opts = [{txt: data.m, isAns: true}];
            let others = shuffle(dataPool.filter(d => d.m !== data.m)).slice(0, 3);
            others.forEach(o => opts.push({txt: o.m, isAns: false}));
            opts = shuffle(opts);

            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt.txt;
                btn.onclick = () => checkAnswer(btn, opt.isAns);
                elOptions.appendChild(btn);
            });
        }

        function checkAnswer(btn, isCorrect) {
            if (isCorrect) {
                stopTimer();
                btn.classList.add('correct');
                elOptions.classList.add('disabled-area');

                if (attempts === 0) {
                    let timeBonus = Math.max(2, 10 - Math.floor(seconds / 2)); 
                    score += timeBonus;
                    updateStatus();
                    setTimeout(() => { nextQuestion(); }, 500);
                } else {
                    elNextBtn.style.display = 'block';
                }
            } else {
                btn.classList.add('wrong');
                btn.disabled = true;

                if (attempts === 0) {
                    attempts = 1;
                    elQHint.style.display = 'block';
                    const currentData = quizList[currentIdx];
                    if(!wrongAnswers.includes(currentData)) {
                        wrongAnswers.push(currentData);
                    }
                } else {
                    stopTimer();
                    elOptions.classList.add('disabled-area');
                    const correctTxt = quizList[currentIdx].m;
                    const allBtns = elOptions.querySelectorAll('.opt-btn');
                    allBtns.forEach(b => {
                        if (b.innerText === correctTxt) b.classList.add('correct');
                    });
                    elNextBtn.style.display = 'block';
                }
            }
        }

        function startTimer() {
            seconds = 0;
            elTimer.innerText = "0s";
            timerInterval = setInterval(() => {
                seconds++;
                elTimer.innerText = seconds + "s";
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function resetTimer() {
            stopTimer();
            seconds = 0;
            elTimer.innerText = "0s";
        }

        function updateStatus() {
            elQCount.innerText = `${currentIdx + 1} / ${quizList.length}`;
            elLiveScore.innerText = score;
        }

        function nextQuestion() {
            currentIdx++;
            loadQuestion();
        }

        function speak() {
            if (!('speechSynthesis' in window)) return;
            const data = quizList[currentIdx];
            const text = data.q; 
            const utt = new SpeechSynthesisUtterance(text);
            utt.lang = 'ja-JP';
            utt.rate = 0.9;
            const voices = window.speechSynthesis.getVoices();
            const jaVoice = voices.find(v => v.lang.includes('ja') || v.lang.includes('JP'));
            if (jaVoice) utt.voice = jaVoice;
            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(utt);
        }
        
        if ('speechSynthesis' in window) {
            window.speechSynthesis.onvoiceschanged = function() { window.speechSynthesis.getVoices(); };
        }

        function finishGame() {
            stopTimer();
            elFinalScore.innerText = score;
            elMaxScore.innerText = maxPossibleScore;

            elWrongList.innerHTML = '';
            if (wrongAnswers.length === 0) {
                elWrongHeader.innerText = "âœ… í‹€ë¦° ë‹¨ì–´ ì—†ìŒ";
                elWrongList.innerHTML = '<div style="padding:10px; text-align:center;">ğŸ‰ ì™„ë²½í•©ë‹ˆë‹¤! </div>';
            } else {
                elWrongHeader.innerText = `âŒ í‹€ë¦° ë‹¨ì–´ (ì´ ${wrongAnswers.length}ê°œ)`;
                wrongAnswers.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'review-item';
                    div.innerHTML = `
                        <div class="review-word">${item.q} (${item.y})</div>
                        <div class="review-mean">${item.m}</div>
                        <div style="font-size:12px; color:#999; margin-top:2px;">${item.tr}</div>
                    `;
                    elWrongList.appendChild(div);
                });
            }
            elResult.style.display = 'flex';
        }

        window.JpN2_1 = { setSize, changeSet, initGame, nextQuestion, speak };
        initGame();
    })();
    </script>
</body>
</html>
