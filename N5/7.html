<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N5 ì¢…í•© ëª¨ì˜ê³ ì‚¬</title>
    
    <style>
        /* --- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ --- */
        .back-link {
            display: inline-block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #34495e;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            font-weight: bold;
            transition: 0.3s;
            text-align: center;
        }
        .back-link:hover { background-color: #2c3e50; transform: translateY(-2px); }
        .top-bar { text-align: center; background-color: #f4f7f6; padding-top: 10px; }

        /* --- ê¸°ì¡´ ìˆ˜í›ˆë‹˜ CSS ì½”ë“œ --- */
        /* 7íƒ„ ì „ìš© ìŠ¤íƒ€ì¼ (ë³€ìˆ˜ ì¶©ëŒ ë°©ì§€ìš© ì ‘ë¯¸ì‚¬ -7 ì ìš©) */
        #jp-final-wrapper-7 {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* ì˜¤íƒ€ ìˆ˜ì •ë¨ */
            padding: 40px 20px;
            border-radius: 10px;
            margin: 0 auto 30px auto; /* ì¤‘ì•™ ì •ë ¬ */
            position: relative;
            --max-width: 600px;
        }

        #jp-final-wrapper-7 .quiz-container {
            background-color: #34495e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            text-align: center;
            width: 100%;
            max-width: var(--max-width);
            position: relative;
            border: 2px solid #f1c40f; /* ê³¨ë“œ í…Œë‘ë¦¬ */
            box-sizing: border-box;
        }

        .final-badge-7 {
            background: #f1c40f; color: #2c3e50; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 14px; display: inline-block; margin-bottom: 10px;
        }

        .game-title-7 { margin: 0 0 5px 0; font-size: 28px; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .game-subtitle-7 { font-size: 16px; color: #bdc3c7; margin-bottom: 25px; }

        /* ì§„í–‰ ìƒíƒœë°” */
        .progress-bar-container-7 { width: 100%; background-color: rgba(0,0,0,0.3); height: 10px; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar-fill-7 { height: 100%; background-color: #2ecc71; width: 0%; transition: width 0.3s ease; }

        /* ë¬¸ì œ ì˜ì—­ */
        .question-card-7 { background: rgba(255,255,255,0.1); padding: 25px; border-radius: 12px; margin-bottom: 20px; min-height: 130px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .category-label-7 { font-size: 14px; color: #f39c12; margin-bottom: 10px; font-weight: bold; letter-spacing: 1px; }
        .question-text-7 { font-size: 28px; font-weight: bold; line-height: 1.4; margin-bottom: 10px; }
        .question-sub-7 { font-size: 16px; color: #bdc3c7; }

        /* í•´ì„¤ ë°•ìŠ¤ */
        .rationale-box-7 { display: none; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: left; line-height: 1.5; font-size: 15px; color: #fff; animation: fadeIn 0.3s; }
        .rationale-correct-7 { background-color: #27ae60; border: 1px solid #2ecc71; }
        .rationale-wrong-7 { background-color: #c0392b; border: 1px solid #e74c3c; }

        /* ë³´ê¸° ë²„íŠ¼ Grid */
        .options-grid-7 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .opt-btn-7 { background-color: #ecf0f1; color: #2c3e50; border: none; padding: 15px; font-size: 16px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s; }
        .opt-btn-7:hover { background-color: #bdc3c7; transform: translateY(-2px); }
        .opt-btn-7.correct { background-color: #2ecc71 !important; color: white; }
        .opt-btn-7.wrong { background-color: #e74c3c !important; color: white; opacity: 0.5; }
        
        /* ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼ */
        .next-btn-7 { display: none; width: 100%; margin-top: 20px; padding: 15px; background-color: #3498db; color: white; font-size: 18px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; animation: fadeIn 0.3s; }
        .next-btn-7:hover { background-color: #2980b9; }

        .disabled-area { pointer-events: none; }

        /* ê²°ê³¼ í™”ë©´ */
        #resultScreen-7 { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(44, 62, 80, 0.98); border-radius: 15px; flex-direction: column; align-items: center; justify-content: center; z-index: 20; }
        .score-circle-7 { width: 150px; height: 150px; border-radius: 50%; border: 5px solid #f1c40f; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 20px 0; background: rgba(0,0,0,0.3); }
        .score-num-7 { font-size: 50px; font-weight: bold; color: #fff; line-height: 1; }
        .score-label-7 { font-size: 14px; color: #bdc3c7; margin-top: 5px; }
        
        .pass-stamp-7 { font-size: 30px; font-weight: 900; padding: 10px 30px; border: 3px solid; border-radius: 10px; margin-bottom: 20px; transform: rotate(-5deg); }
        .pass-7 { color: #2ecc71; border-color: #2ecc71; }
        .fail-7 { color: #e74c3c; border-color: #e74c3c; }

        .restart-btn-7 { padding: 12px 30px; font-size: 18px; background-color: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 500px) { .options-grid-7 { grid-template-columns: 1fr; } }
    </style>
</head>
<body style="background-color: #f4f7f6; margin: 0; padding: 0;">

    <div class="top-bar">
        <a href="../index.html" class="back-link">ğŸ”™ ë©”ì¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <div id="jp-final-wrapper-7">
        <div class="quiz-container">
            <div class="final-badge-7">Final Test</div>
            <h2 class="game-title-7">JLPT N5 ì¢…í•© ëª¨ì˜ê³ ì‚¬</h2>
            <div class="game-subtitle-7">20ë¬¸ì œ ëœë¤ ì¶œì œ / 60ì  ì´ìƒ í•©ê²©</div>

            <div class="progress-bar-container-7">
                <div class="progress-bar-fill-7" id="progressBar-7"></div>
            </div>

            <div class="question-card-7">
                <div class="category-label-7" id="qCategory-7">CATEGORY</div>
                <div class="question-text-7" id="qText-7">ë¬¸ì œ ë¡œë”© ì¤‘...</div>
                <div class="question-sub-7" id="qSub-7"></div>
            </div>

            <div class="rationale-box-7" id="qRationale-7"></div>

            <div class="options-grid-7" id="qOptions-7"></div>

            <button id="btnNext-7" class="next-btn-7" onclick="JpQuiz7.nextQuestion()">ë‹¤ìŒ ë¬¸ì œ â–¶</button>

            <div id="resultScreen-7">
                <h2 style="color:white; margin-bottom:10px;">ì‹œí—˜ ì¢…ë£Œ</h2>
                <div class="pass-stamp-7" id="resultStamp-7">í•© ê²©</div>
                
                <div class="score-circle-7">
                    <span class="score-num-7" id="finalScore-7">0</span>
                    <span class="score-label-7">SCORE</span>
                </div>
                
                <div style="color:#bdc3c7; margin-bottom:20px; font-size:14px;" id="resultMsg-7">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!</div>
                <button class="restart-btn-7" onclick="JpQuiz7.initTest()">ìƒˆ ë¬¸ì œ í’€ê¸° (ëœë¤)</button>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // ë¬¸ì œ ë°ì´í„° (50ê°œ í’€)
            const questionPool = [
                // [ëª…ì‚¬]
                { type: "VOCAB (ëª…ì‚¬)", q: "ã­ã“", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ê³ ì–‘ì´", "ê°•ì•„ì§€", "ìƒˆ", "ë¬¼ê³ ê¸°"], ans: 0, reason: "'ë„¤ì½”(ã­ã“)'ëŠ” ê³ ì–‘ì´ë¥¼ ëœ»í•©ë‹ˆë‹¤. ê°•ì•„ì§€ëŠ” 'ì´ëˆ„(ã„ã¬)'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ëª…ì‚¬)", q: "ã„ã™", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì˜ì", "ì±…ìƒ", "ì°½ë¬¸", "ì‹œê³„"], ans: 0, reason: "'ì´ìŠ¤(ã„ã™)'ëŠ” ì˜ìì…ë‹ˆë‹¤. ì±…ìƒì€ 'ì¸ ì¿ ì—(ã¤ããˆ)'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ëª…ì‚¬)", q: "ã¨ã‘ã„", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì‹œê³„", "ì§€ë„", "ê°€ë°©", "ì§€ê°‘"], ans: 0, reason: "'í† ì¼€ì´(ã¨ã‘ã„)'ëŠ” ì‹œê³„ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ëª…ì‚¬)", q: "ã¿ãš", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ë¬¼", "ë¶ˆ", "ëˆ", "í™"], ans: 0, reason: "'ë¯¸ì¦ˆ(ã¿ãš)'ëŠ” ë¬¼ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ëª…ì‚¬)", q: "ã˜ã¦ã‚“ã—ã‚ƒ", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ìì „ê±°", "ìë™ì°¨", "ì „ì² ", "ë¹„í–‰ê¸°"], ans: 0, reason: "'ì§€í…ìƒ¤(ã˜ã¦ã‚“ã—ã‚ƒ)'ëŠ” ìì „ê±°ì…ë‹ˆë‹¤." },

                // [ë™ì‚¬]
                { type: "VOCAB (ë™ì‚¬)", q: "ãŸã¹ã‚‹", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ë¨¹ë‹¤", "ë§ˆì‹œë‹¤", "ë³´ë‹¤", "ìë‹¤"], ans: 0, reason: "'íƒ€ë² ë£¨(ãŸã¹ã‚‹)'ëŠ” 'ë¨¹ë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ë™ì‚¬)", q: "ã„ã", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ê°€ë‹¤", "ì˜¤ë‹¤", "ëŒì•„ê°€ë‹¤", "ì¼ì–´ë‚˜ë‹¤"], ans: 0, reason: "'ì´ì¿ (ã„ã)'ëŠ” 'ê°€ë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ë™ì‚¬)", q: "ã‚ˆã‚€", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì½ë‹¤", "ì“°ë‹¤", "ë“£ë‹¤", "ë§í•˜ë‹¤"], ans: 0, reason: "'ìš”ë¬´(ã‚ˆã‚€)'ëŠ” 'ì½ë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ë™ì‚¬)", q: "ãŠã‚ˆã", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ìˆ˜ì˜í•˜ë‹¤", "ë‹¬ë¦¬ë‹¤", "ê±·ë‹¤", "ë†€ë‹¤"], ans: 0, reason: "'ì˜¤ìš”êµ¬(ãŠã‚ˆã)'ëŠ” 'í—¤ì—„ì¹˜ë‹¤/ìˆ˜ì˜í•˜ë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ë™ì‚¬)", q: "ã‚ã‹ã‚‹", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì•Œë‹¤(ì´í•´)", "ëª¨ë¥´ë‹¤", "ìŠë‹¤", "ìƒê°í•˜ë‹¤"], ans: 0, reason: "'ì™€ì¹´ë£¨(ã‚ã‹ã‚‹)'ëŠ” ë‚´ìš©ì„ ì´í•´í•˜ê±°ë‚˜ 'ì•Œë‹¤'ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤." },

                // [í˜•ìš©ì‚¬]
                { type: "VOCAB (í˜•ìš©ì‚¬)", q: "ãŠã„ã—ã„", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ë§›ìˆë‹¤", "ë§›ì—†ë‹¤", "ë¹„ì‹¸ë‹¤", "ë§µë‹¤"], ans: 0, reason: "'ì˜¤ì´ì‹œì´(ãŠã„ã—ã„)'ëŠ” 'ë§›ìˆë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (í˜•ìš©ì‚¬)", q: "ã‚ã¤ã„", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ë¥ë‹¤/ëœ¨ê²ë‹¤", "ì¶¥ë‹¤", "ì‹œì›í•˜ë‹¤", "ë”°ëœ»í•˜ë‹¤"], ans: 0, reason: "'ì•„ì¸ ì´(ã‚ã¤ã„)'ëŠ” ë¥ê±°ë‚˜ ëœ¨ê²ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤." },
                { type: "VOCAB (í˜•ìš©ì‚¬)", q: "ãŸã®ã—ã„", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì¦ê²ë‹¤", "ìŠ¬í”„ë‹¤", "ë¬´ì„­ë‹¤", "ì§€ë£¨í•˜ë‹¤"], ans: 0, reason: "'íƒ€ë…¸ì‹œì´(ãŸã®ã—ã„)'ëŠ” 'ì¦ê²ë‹¤'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (í˜•ìš©ì‚¬)", q: "ã—ãšã‹ã ", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì¡°ìš©í•˜ë‹¤", "ì‹œë„ëŸ½ë‹¤", "ìœ ëª…í•˜ë‹¤", "ì¹œì ˆí•˜ë‹¤"], ans: 0, reason: "'ì‹œì¦ˆì¹´ë‹¤(ã—ãšã‹ã )'ëŠ” 'ì¡°ìš©í•˜ë‹¤'ë¼ëŠ” ë‚˜í˜•ìš©ì‚¬ì…ë‹ˆë‹¤." },
                { type: "VOCAB (í˜•ìš©ì‚¬)", q: "ã™ãã ", sub: "ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ì¢‹ì•„í•˜ë‹¤", "ì‹«ì–´í•˜ë‹¤", "ì˜í•˜ë‹¤", "ëª»í•˜ë‹¤"], ans: 0, reason: "'ìŠ¤í‚¤ë‹¤(ã™ãã )'ëŠ” 'ì¢‹ì•„í•˜ë‹¤'ì…ë‹ˆë‹¤." },

                // [í•œì]
                { type: "KANJI (í•œì)", q: "ä¸€ä¸‡å††", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ã„ã¡ã¾ã‚“ãˆã‚“", "ã²ã‚ƒãã¾ã‚“ãˆã‚“", "ã„ã¡ã›ã‚“ãˆã‚“", "ã˜ã‚…ã†ã¾ã‚“ãˆã‚“"], ans: 0, reason: "ä¸€(ì´ì¹˜) + ä¸‡(ë§Œ) + å††(ì—”) = ì´ì¹˜ë§Œì—”ì…ë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "å­¦ç”Ÿ", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ãŒãã›ã„", "ã›ã‚“ã›ã„", "ãŒã£ã“ã†", "ã ã„ãŒã"], ans: 0, reason: "å­¦ç”Ÿì€ 'ê°€ì¿ ì„¸ì´(í•™ìƒ)'ë¼ê³  ì½ìŠµë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "ä»Šæ—¥", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ãã‚‡ã†", "ãã®ã†", "ã‚ã—ãŸ", "ã„ã¾"], ans: 0, reason: "ä»Šæ—¥ëŠ” 'ì¿„-(ì˜¤ëŠ˜)'ë¼ê³  ì½ìŠµë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "é£Ÿã¹ã‚‹", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ãŸã¹ã‚‹", "ã®ã‚€", "ã¿ã‚‹", "ãã"], ans: 0, reason: "é£ŸëŠ” 'ë¨¹ì„ ì‹'ìë¡œ, í›ˆë…ì€ 'íƒ€ë² ë£¨'ì…ë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "å³", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ã¿ã", "ã²ã ã‚Š", "ã†ãˆ", "ã—ãŸ"], ans: 0, reason: "å³ëŠ” 'ë¯¸ê¸°(ì˜¤ë¥¸ìª½)'ì…ë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "èã", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ãã", "ã‹ã", "ã‚ã", "ã²ã"], ans: 0, reason: "èãëŠ” 'í‚¤ì¿ (ë“£ë‹¤)'ë¼ê³  ì½ìŠµë‹ˆë‹¤." },
                { type: "KANJI (í•œì)", q: "æ–°ã—ã„", sub: "ì˜¬ë°”ë¥¸ ë°œìŒì€?", opts: ["ã‚ãŸã‚‰ã—ã„", "ãµã‚‹ã„", "ã†ã‚Œã—ã„", "ã„ããŒã—ã„"], ans: 0, reason: "æ–°ëŠ” 'ìƒˆ ì‹ 'ìë¡œ, 'ì•„íƒ€ë¼ì‹œì´'ë¼ê³  ì½ìŠµë‹ˆë‹¤." },

                // [ë¬¸ë²•]
                { type: "GRAMMAR (ë¬¸ë²•)", q: "ç§ã¯ å­¦ç”Ÿ______ã€‚", sub: "ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì€?", opts: ["ã§ã™", "ã¾ã™", "ã„ã¾ã™", "ã‚ã‚Šã¾ã™"], ans: 0, reason: "'í•™ìƒì…ë‹ˆë‹¤'ëŠ” ëª…ì‚¬ ë’¤ì— 'ë°ìŠ¤(ã§ã™)'ë¥¼ ì”ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "ã”é£¯______ é£Ÿã¹ã¾ã™ã€‚", sub: "ì•Œë§ì€ ì¡°ì‚¬ëŠ”?", opts: ["ã‚’", "ãŒ", "ã¯", "ã«"], ans: 0, reason: "ëª©ì ì–´(~ì„/ë¥¼) ë’¤ì—ëŠ” ì¡°ì‚¬ 'ì˜¤(ã‚’)'ë¥¼ ì”ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "å­¦æ ¡______ è¡Œãã¾ã™ã€‚", sub: "ì•Œë§ì€ ì¡°ì‚¬ëŠ”?", opts: ["ã¸", "ã‚’", "ãŒ", "ã§"], ans: 0, reason: "ë°©í–¥(~ìœ¼ë¡œ/ì—)ì„ ë‚˜íƒ€ë‚¼ ë•ŒëŠ” 'ì—(ã¸)'ë¥¼ ì”ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "ãƒã‚¹______ æ¥ã¾ã—ãŸã€‚", sub: "ì•Œë§ì€ ì¡°ì‚¬ëŠ”?", opts: ["ã§", "ã«", "ã‚’", "ãŒ"], ans: 0, reason: "êµí†µìˆ˜ë‹¨(~ìœ¼ë¡œ) ë’¤ì—ëŠ” ì¡°ì‚¬ 'ë°(ã§)'ë¥¼ ì”ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "æœºã®ä¸Šã« æœ¬ãŒ ______ã€‚", sub: "ì•Œë§ì€ ë§ì€?", opts: ["ã‚ã‚Šã¾ã™", "ã„ã¾ã™", "ã§ã™", "ã—ã¾ã™"], ans: 0, reason: "ì‚¬ë¬¼(ì±…)ì´ ìˆë‹¤ëŠ” 'ì•„ë¦¬ë§ˆìŠ¤(ã‚ã‚Šã¾ã™)'ë¥¼ ì”ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "ã„ã£ã—ã‚‡ã« ______ã€‚", sub: "ê¶Œìœ í˜•ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ã„ãã¾ã›ã‚“ã‹", "ã„ãã¾ã™ã‹", "ã„ãã¾ã™", "ã„ã£ã¦ãã ã•ã„"], ans: 0, reason: "ê¶Œìœ í•  ë•ŒëŠ” ë¶€ì •ì˜ë¬¸ë¬¸ '~ë§ˆì…ì¹´(ê°€ì§€ ì•Šê² ìŠµë‹ˆê¹Œ)'ê°€ ìì—°ìŠ¤ëŸ½ìŠµë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "ã“ã‚Œã‚’ ______ ãã ã•ã„ã€‚", sub: "ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì€?", opts: ["ã‹ã„ã¦", "ã‹ã", "ã‹ã", "ã‹ãã¾ã™"], ans: 0, reason: "~í•´ ì£¼ì„¸ìš”ëŠ” 'í…Œí˜•' + ì¿ ë‹¤ì‚¬ì´ì…ë‹ˆë‹¤. ì“°ë‹¤ëŠ” 'ì¹´ì´í…Œ'ì…ë‹ˆë‹¤." },
                { type: "GRAMMAR (ë¬¸ë²•)", q: "æ˜¨æ—¥ã€å‹‰å¼· ______ã€‚", sub: "ê³¼ê±°í˜•ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ã—ã¾ã—ãŸ", "ã—ã¾ã™", "ã—ã¾ã›ã‚“", "ã—ã¦ãã ã•ã„"], ans: 0, reason: "ì–´ì œ(í‚¤ë…¸ìš°) ì¼ì´ë¯€ë¡œ ê³¼ê±°í˜• 'ì‹œë§ˆì‹œíƒ€'ê°€ ì •ë‹µì…ë‹ˆë‹¤." },

                // [íšŒí™”]
                { type: "CONVERSATION", q: "ì•„ì¹¨ ì¸ì‚¬", sub: "ì•Œë§ì€ ì¼ë³¸ì–´ëŠ”?", opts: ["ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™", "ã“ã‚“ã«ã¡ã¯", "ã“ã‚“ã°ã‚“ã¯", "ã•ã‚ˆã†ãªã‚‰"], ans: 0, reason: "ì•„ì¹¨ ì¸ì‚¬ëŠ” 'ì˜¤í•˜ìš”-ê³ ìì´ë§ˆìŠ¤'ì…ë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "ì˜ ë¨¹ê² ìŠµë‹ˆë‹¤", sub: "ì•Œë§ì€ ì¼ë³¸ì–´ëŠ”?", opts: ["ã„ãŸã ãã¾ã™", "ã”ã¡ãã†ã•ã¾", "ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã›", "ãŸã ã„ã¾"], ans: 0, reason: "ì‹ì „ ì¸ì‚¬ëŠ” 'ì´íƒ€ë‹¤í‚¤ë§ˆìŠ¤'ì…ë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "ë‹¤ë…€ì˜¤ê² ìŠµë‹ˆë‹¤", sub: "ì•Œë§ì€ ì¼ë³¸ì–´ëŠ”?", opts: ["ã„ã£ã¦ãã¾ã™", "ã„ã£ã¦ã‚‰ã£ã—ã‚ƒã„", "ãŠã‹ãˆã‚Šãªã•ã„", "ã—ã¤ã‚Œã„ã—ã¾ã™"], ans: 0, reason: "ë‚˜ê°ˆ ë•ŒëŠ” 'ì‡í…Œí‚¤ë§ˆìŠ¤'ë¼ê³  í•©ë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "ê°ì‚¬í•©ë‹ˆë‹¤", sub: "ì•Œë§ì€ ì¼ë³¸ì–´ëŠ”?", opts: ["ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™", "ã™ã¿ã¾ã›ã‚“", "ãŠã‚ã§ã¨ã†", "ã©ã†ã„ãŸã—ã¾ã—ã¦"], ans: 0, reason: "ê°ì‚¬ í‘œí˜„ì€ 'ì•„ë¦¬ê°€í† -ê³ ìì´ë§ˆìŠ¤'ì…ë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "ì²˜ìŒ ëµ™ê² ìŠµë‹ˆë‹¤", sub: "ì•Œë§ì€ ì¼ë³¸ì–´ëŠ”?", opts: ["ã¯ã˜ã‚ã¾ã—ã¦", "ã‚ˆã‚ã—ã", "ã“ã‚“ã°ã‚“ã¯", "ãŠã’ã‚“ãã§ã™ã‹"], ans: 0, reason: "ì²« ì¸ì‚¬ëŠ” 'í•˜ì§€ë©”ë§ˆì‹œí…Œ'ì…ë‹ˆë‹¤." },

                // [ê¸°íƒ€]
                { type: "GRAMMAR (ì§€ì‹œì–´)", q: "______ ã¯ ãªã‚“ã§ã™ã‹ã€‚", sub: "ì´ê²ƒì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?", opts: ["ã“ã‚Œ", "ã“ã“", "ã“ã®", "ã“ã¡ã‚‰"], ans: 0, reason: "ì‚¬ë¬¼ì„ ê°€ë¦¬í‚¤ëŠ” 'ì´ê²ƒ'ì€ 'ì½”ë ˆ(ã“ã‚Œ)'ì…ë‹ˆë‹¤." },
                { type: "VOCAB (ìˆ«ì)", q: "ä¸‰ã¤", sub: "ì½ëŠ” ë²•ì€?", opts: ["ã¿ã£ã¤", "ãµãŸã¤", "ã²ã¨ã¤", "ã‚ˆã£ã¤"], ans: 0, reason: "ì„¸ ê°œëŠ” 'ë°‹ì¸ (ã¿ã£ã¤)'ë¼ê³  ì½ìŠµë‹ˆë‹¤." },
                { type: "VOCAB (ìš”ì¼)", q: "æœˆæ›œæ—¥", sub: "ì½ëŠ” ë²•ì€?", opts: ["ã’ã¤ã‚ˆã†ã³", "ã‹ã‚ˆã†ã³", "ã™ã„ã‚ˆã†ã³", "ãã‚“ã‚ˆã†ã³"], ans: 0, reason: "ì›”ìš”ì¼ì€ 'ê²Œì¸ ìš”-ë¹„'ì…ë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "ì–¼ë§ˆì…ë‹ˆê¹Œ?", sub: "ì¼ë³¸ì–´ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ã„ãã‚‰ã§ã™ã‹", "ã„ãã¤ã§ã™ã‹", "ãªã‚“ã˜ã§ã™ã‹", "ã ã‚Œã§ã™ã‹"], ans: 0, reason: "ê°€ê²©ì€ 'ì´ì¿ ë¼(ì–¼ë§ˆ)'ë¡œ ë¬»ìŠµë‹ˆë‹¤." },
                { type: "CONVERSATION", q: "í™”ì¥ì‹¤ì€ ì–´ë””ì…ë‹ˆê¹Œ?", sub: "ì¼ë³¸ì–´ë¡œ ì•Œë§ì€ ê²ƒì€?", opts: ["ãƒˆã‚¤ãƒ¬ã¯ã©ã“ã§ã™ã‹", "ãƒˆã‚¤ãƒ¬ã¯ã©ã‚Œã§ã™ã‹", "ãƒˆã‚¤ãƒ¬ã¯ã ã‚Œã§ã™ã‹", "ãƒˆã‚¤ãƒ¬ã¯ã„ã¤ã§ã™ã‹"], ans: 0, reason: "ì¥ì†Œë¥¼ ë¬¼ì„ ë•ŒëŠ” 'ë„ì½”(ì–´ë””)'ì…ë‹ˆë‹¤." }
            ];

            let quizList = [];
            let currentIdx = 0;
            let score = 0;
            const TOTAL_QUESTIONS = 20;

            const elQCat = document.getElementById('qCategory-7');
            const elQText = document.getElementById('qText-7');
            const elQSub = document.getElementById('qSub-7');
            const elRationale = document.getElementById('qRationale-7');
            const elOpts = document.getElementById('qOptions-7');
            const elBar = document.getElementById('progressBar-7');
            const elRes = document.getElementById('resultScreen-7');
            const elNextBtn = document.getElementById('btnNext-7');

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            function initTest() {
                let shuffledPool = shuffle([...questionPool]);
                quizList = shuffledPool.slice(0, TOTAL_QUESTIONS);
                
                currentIdx = 0;
                score = 0;
                elRes.style.display = 'none';
                loadQuestion();
            }

            function loadQuestion() {
                if (currentIdx >= TOTAL_QUESTIONS) {
                    finishTest();
                    return;
                }

                const data = quizList[currentIdx];
                const progress = ((currentIdx) / TOTAL_QUESTIONS) * 100;
                elBar.style.width = `${progress}%`;

                elQCat.innerText = data.type;
                elQText.innerText = data.q;
                elQSub.innerText = data.sub;

                elRationale.style.display = 'none';
                elRationale.className = 'rationale-box-7'; 
                elNextBtn.style.display = 'none';

                elOpts.innerHTML = '';
                elOpts.classList.remove('disabled-area');
                
                let optIndices = [0, 1, 2, 3];
                optIndices = shuffle(optIndices);

                optIndices.forEach(idx => {
                    const btn = document.createElement('button');
                    btn.className = 'opt-btn-7';
                    btn.innerText = data.opts[idx];
                    const isCorrect = (idx === data.ans);
                    btn.onclick = () => checkAnswer(btn, isCorrect, data);
                    elOpts.appendChild(btn);
                });
            }

            function checkAnswer(btn, isCorrect, data) {
                elOpts.classList.add('disabled-area');
                elRationale.style.display = 'block';

                if (isCorrect) {
                    btn.classList.add('correct');
                    score += 5;
                    elRationale.classList.add('rationale-correct-7');
                    elRationale.innerHTML = `<span style="font-weight:bold;">â­• ì •ë‹µì…ë‹ˆë‹¤!</span><br>${data.reason}`;
                } else {
                    btn.classList.add('wrong');
                    const allBtns = elOpts.querySelectorAll('.opt-btn-7');
                    const correctTxt = data.opts[0]; 
                    allBtns.forEach(b => {
                        if (b.innerText === correctTxt) b.classList.add('correct');
                    });
                    elRationale.classList.add('rationale-wrong-7');
                    elRationale.innerHTML = `<span style="font-weight:bold;">âŒ í‹€ë ¸ìŠµë‹ˆë‹¤.</span><br>ì •ë‹µ: ${correctTxt}<br>${data.reason}`;
                }

                elNextBtn.style.display = 'block';
            }

            function nextQuestion() {
                currentIdx++;
                loadQuestion();
            }

            function finishTest() {
                elBar.style.width = '100%';
                const finalScore = score;
                document.getElementById('finalScore-7').innerText = finalScore;
                
                const stamp = document.getElementById('resultStamp-7');
                const msg = document.getElementById('resultMsg-7');

                if (finalScore >= 80) {
                    stamp.innerText = "ê³ ë“ì  í•©ê²©";
                    stamp.className = "pass-stamp-7 pass-7";
                    msg.innerText = "ì¶•í•˜í•©ë‹ˆë‹¤! N5 ë§ˆìŠ¤í„° ë“±ê¸‰ì…ë‹ˆë‹¤! ğŸ‰";
                } else if (finalScore >= 60) {
                    stamp.innerText = "í•© ê²©";
                    stamp.className = "pass-stamp-7 pass-7";
                    msg.innerText = "í•©ê²©ì…ë‹ˆë‹¤! N4ì— ë„ì „í•´ë³´ì„¸ìš”. ğŸ‘";
                } else {
                    stamp.innerText = "ë¶ˆí•©ê²©";
                    stamp.className = "pass-stamp-7 fail-7";
                    msg.innerText = "ì¡°ê¸ˆ ë” ë³µìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”! ğŸ’ª";
                }

                elRes.style.display = 'flex';
            }

            window.JpQuiz7 = {
                initTest: initTest,
                nextQuestion: nextQuestion
            };

            initTest();
        })();
    </script>
</body>
</html>
